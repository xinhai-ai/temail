# ======================
# 部署模式
# ======================
# 部署到 Vercel 时，将部署模式设置为 "vercel"。
# 该模式会关闭在 Serverless / 多实例环境下不可靠的功能：
# - IMAP（服务集成 + UI）
# - SMTP 转发（发信）
# - 原始邮件存储/展示（无持久化文件系统）
# - DKIM 校验（依赖原始 RFC822）
# - 实时 SSE（UI 端改为轮询）
#
# TEMAIL_DEPLOYMENT_MODE="vercel"
# NEXT_PUBLIC_TEMAIL_DEPLOYMENT_MODE="vercel"

# ======================
# 数据库
# ======================
# 复制到 `.env` 后，按需取消注释。
#
# SQLite（默认，开发推荐）：
#   file:./dev.db
#
# Docker + volume 示例（Compose 下使用 SQLite 推荐）：
#   file:/data/temail.db
#
# PostgreSQL（生产推荐）：
#   postgresql://user:password@localhost:5432/temail
#
# DATABASE_URL="file:./dev.db"
# DATABASE_URL="postgresql://user:password@localhost:5432/temail"

# ======================
# 认证（NextAuth v5）
# ======================
# 生产环境请生成高强度密钥：
#   openssl rand -hex 32
# AUTH_SECRET="change-me"

# 用于加密敏感认证数据（例如 OTP TOTP 密钥）。
# 生产环境请生成高强度密钥：
#   openssl rand -hex 32
# AUTH_ENCRYPTION_KEY="change-me"

# OAuth 提供商在管理后台中配置。

# ======================
# Open API（可选）
# ======================
# 用于哈希 Open API Key 的 pepper。生产环境请使用高强度密钥：
#   openssl rand -hex 32
# 若不设置，将回退使用 AUTH_SECRET。
# OPEN_API_KEY_PEPPER="change-me"

# 站点对外可访问的基础 URL（不要带结尾斜杠）。
# 本地开发：
# AUTH_URL="http://localhost:3000"

# ======================
# 应用（公开变量）
# ======================
# NEXT_PUBLIC_APP_NAME="TEmail"
# NEXT_PUBLIC_APP_URL="http://localhost:3000"

# ======================
# 引导超级管理员（可选）
# ======================
# 如果设置，首个注册用户可通过提供该值作为 `adminSecret` 成为 SUPER_ADMIN。
# 也可额外限制允许引导的邮箱。
# BOOTSTRAP_SUPER_ADMIN_MAIL="admin@example.com"
# BOOTSTRAP_SUPER_ADMIN_SECRET=""

# ======================
# 引导管理员（自动创建）
# ======================
# Docker Compose 启动时会执行 `node scripts/bootstrap-admin.js`。
# 当数据库中没有用户时，会自动创建一个 SUPER_ADMIN 用户。
#
# BOOTSTRAP_ADMIN_EMAIL="admin@temail.local"
# BOOTSTRAP_ADMIN_PASSWORD=""
# BOOTSTRAP_ADMIN_NAME="Admin"
# BOOTSTRAP_ADMIN_ROLE="SUPER_ADMIN"
#
# 引导脚本等待模式参数：
# BOOTSTRAP_WAIT_SECONDS="180"
# BOOTSTRAP_POLL_INTERVAL_MS="1000"

# ======================
# SMTP（可选，用于邮件转发）
# ======================
# SMTP_HOST=""
# SMTP_PORT="587"
# SMTP_SECURE="false"
# SMTP_USER=""
# SMTP_PASS=""
# SMTP_FROM=""

# ======================
# IMAP 服务（可选）
# ======================
# 在 Web 应用中启用 IMAP 服务集成。
# IMAP_SERVICE_ENABLED="1"

# Web 应用访问 IMAP 服务的地址。
# 本地开发：localhost
# Docker Compose：worker
# IMAP_SERVICE_HOST="localhost"
# IMAP_SERVICE_HOST="worker"
# IMAP_SERVICE_PORT="3001"

# IMAP 服务与 Web 内部 API `/api/internal/realtime` 的共享密钥。
# 留空时仅允许 localhost 调用（仅开发环境建议）。
# IMAP_SERVICE_KEY=""

# IMAP 服务回调 Web 的基础 URL（用于实时通知）。
# NEXTJS_URL="http://localhost:3000"
# NEXTJS_PORT="3000"

# IMAP 服务调优参数（可选）
# IMAP_IDLE_TIMEOUT_MS="1500000"
# IMAP_HEARTBEAT_MS="300000"
# IMAP_RECONCILE_MS="30000"
# IMAP_FULL_SYNC_MS="300000"
# IMAP_HEALTH_CHECK_MS="60000"
# IMAP_RECONNECT_MIN_MS="1000"
# IMAP_RECONNECT_MAX_MS="300000"
# IMAP_SERVICE_DEBUG="false"

# 外部触发保留任务的令牌（/api/jobs/retention 必需）
# 生产环境请使用高强度随机值。
# JOBS_TRIGGER_TOKEN="change-me"

# Worker 侧保留任务调度（运行 worker 时默认开启）。
# worker 会每小时携带 JOBS_TRIGGER_TOKEN 调用 `/api/jobs/retention`。
# WORKER_RETENTION_JOB_ENABLED="1"

# 外部 cron 示例（每小时）：
# 当你不运行 worker 服务时，使用该方式触发。
# curl -X POST "http://localhost:3000/api/jobs/retention" \\
#   -H "x-job-token: ${JOBS_TRIGGER_TOKEN}" \\
#   -H "content-type: application/json" \\
#   -d "{}"

# 可选：设置容器时区
# TZ="UTC"

# ======================
# 存储（文件系统）
# ======================
# 文件存储基础路径（原始邮件、附件）。
# Docker：/data/storage
# 开发环境：./data/storage
# STORAGE_PATH="./data/storage"

# 存储后端：local | s3
# STORAGE_BACKEND="local"

# 可选 S3 配置（当 STORAGE_BACKEND=s3 时必填）
# STORAGE_S3_ENDPOINT="https://s3.amazonaws.com"
# STORAGE_S3_REGION="us-east-1"
# STORAGE_S3_BUCKET="temail-storage"
# STORAGE_S3_ACCESS_KEY_ID=""
# STORAGE_S3_SECRET_ACCESS_KEY=""
# STORAGE_S3_FORCE_PATH_STYLE="false"
# STORAGE_S3_BASE_PREFIX="temail"

# 附件大小上限（字节，默认 25MB = 26214400）
# ATTACHMENT_MAX_SIZE="26214400"

# ======================
# 缓存（可选）
# ======================
# 缓存模式：memory | redis（默认 memory）
# CACHE_MODE="memory"
#
# 当 CACHE_MODE=redis 时必填：
# CACHE_REDIS_URL="redis://localhost:6379"
#
# 缓存 key 前缀（默认 temail）
# CACHE_PREFIX="temail"
#
# memory 模式最大缓存条目（默认 10000）
# CACHE_MEMORY_MAX_ENTRIES="10000"

# ======================
# 开发辅助（可选）
# ======================
# 仅用于 `scripts/test-webhook.ts`。
# TEST_WEBHOOK_SECRET=""

# ======================
# Telegram 机器人
# ======================
# 在管理后台配置 Telegram 机器人与 Webhook：
#   /admin/telegram

# ======================
# Turnstile（仅开发）
# ======================
# Cloudflare Turnstile 在管理后台配置（系统设置 -> 安全）。
# 本地开发可跳过服务端校验：
# TURNSTILE_DEV_BYPASS="1"
